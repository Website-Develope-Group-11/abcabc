<html>
    <head>
        <title>å¹»å¡æ‰­åŸŸ</title>
        <style>
            * {
                box-sizing: border-box;
                margin: 0;
                padding: 0;
            }

            body {
                font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
                
                /* --- ä¿®æ”¹é–‹å§‹ï¼šèƒŒæ™¯åœ–ç‰‡è¨­å®š --- */
                
                /* 1. æŒ‡å®šåœ–ç‰‡è·¯å¾‘ */
                background-image: url('./background.png');
                
                /* 2. è®“åœ–ç‰‡å¡«æ»¿æ•´å€‹è¢å¹• (Cover) */
                background-size: cover;
                
                /* 3. åœ–ç‰‡ç½®ä¸­å°é½Š */
                background-position: center center;
                
                /* 4. é˜²æ­¢åœ–ç‰‡é‡è¤‡ */
                background-repeat: no-repeat;
                
                /* (é¸ç”¨) 5. è®“èƒŒæ™¯å›ºå®šï¼Œä¸æœƒéš¨é é¢æ²å‹• (é›–ç„¶ä¸»ç•«é¢ä¹Ÿä¸èƒ½æ²å‹•) */
                background-attachment: fixed;

                /* (é¸ç”¨) 6. åŠ ä¸€å±¤åŠé€æ˜é»‘è‰²é®ç½©ï¼Œé¿å…èƒŒæ™¯å¤ªèŠ±å°è‡´æ–‡å­—çœ‹ä¸æ¸…æ¥š */
                /* å¦‚æœæ‚¨çš„èƒŒæ™¯åœ–å¾ˆæš—ï¼Œå¯ä»¥æŠŠä¸‹é¢é€™è¡Œæ‹¿æ‰ */
                /* background-blend-mode: overlay; */
                /* background-color: rgba(0, 0, 0, 0.4); */

                /* --- ä¿®æ”¹çµæŸ --- */

                color: #f5f5ff;
                height: 100vh;
                overflow: hidden;
                position: relative;
            }

            /* ä¸­å¤®æ€ªç‰© + ä¸»è§’å€ */
            .battle {
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -55%);
                display: flex;
                flex-direction: column;
                align-items: center;
                gap: 16px;
            }

            .monster, .player {
                display: flex;
                flex-direction: column; /* é—œéµï¼šè®“åœ–ç‰‡å’Œæ–‡å­—è®Šå‚ç›´æ’åˆ— */
                align-items: center;
                justify-content: center;
                gap: 8px; /* åœ–ç‰‡è·Ÿæ–‡å­—çš„è·é›¢ */
            }

            .player {
                /* ç¢ºä¿ä¸»è§’åœ¨ç§»å‹•æ™‚æœƒè“‹åœ¨æ€ªç¸å’Œå…¶ä»–å…ƒç´ ä¸Šé¢ */
                position: relative;
                z-index: 10;
                
                /* é—œéµï¼šåŠ å…¥è½‰å ´æ•ˆæœ */
                /* all ä»£è¡¨æ‰€æœ‰å±¬æ€§è®ŠåŒ–éƒ½è¦æœ‰å‹•ç•« */
                /* 0.3s æ˜¯å‹•ç•«æ™‚é–“ */
                /* cubic-bezier(...) æ˜¯ä¸€å€‹è²èŒ²æ›²ç·šï¼Œèƒ½è£½é€ å‡ºã€Œè¡å‡ºå»å¾Œç¨å¾®å›å½ˆä¸€é»ã€çš„æ‰“æ“Šæ„Ÿ */
                transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            }

            /* 2. æ–°å¢ï¼šæ”»æ“Šç‹€æ…‹çš„æ¨£å¼ */
            /* ç•¶ .player å…ƒç´ åŒæ™‚æ“æœ‰ .attacking é€™å€‹é¡åˆ¥æ™‚ï¼Œå°±æœƒå¥—ç”¨é€™å€‹æ¨£å¼ */
            .player.attacking {
                /* å¾€ä¸Šç§»å‹• 180px (è² æ•¸æ˜¯å¾€ä¸Š)ï¼Œä¸¦æ”¾å¤§ 1.1 å€ */
                /* æç¤ºï¼šå¦‚æœæ’çš„ä½ç½®å¤ªé«˜æˆ–å¤ªä½ï¼Œè«‹èª¿æ•´ -180px é€™å€‹æ•¸å­— */
                transform: translateY(-180px) scale(1.1);
                
                /* åŠ å€‹é™°å½±è®“å®ƒçœ‹èµ·ä¾†é£›èµ·ä¾†äº† */
                box-shadow: 0 15px 30px rgba(0,0,0,0.4);
            }

            @keyframes shakeMonster {
                0% { transform: translate(0, 0) rotate(0deg); }
                20% { transform: translate(-10px, 0) rotate(-5deg); } /* å¾€å·¦æ­ª */
                40% { transform: translate(10px, 0) rotate(5deg); }   /* å¾€å³æ­ª */
                60% { transform: translate(-10px, 0) rotate(-5deg); } /* å†å¾€å·¦ */
                80% { transform: translate(10px, 0) rotate(5deg); }   /* å†å¾€å³ */
                100% { transform: translate(0, 0) rotate(0deg); }
            }

            .monster.hit {
                /* å‹•ç•«æ™‚é–“è¨­å®šç‚º 0.5 ç§’ */
                animation: shakeMonster 0.5s ease-in-out; 
                /* å—å‚·æ™‚è®Šç´…ä¸€ä¸‹ï¼Œå¢åŠ æ‰“æ“Šæ„Ÿ */
                filter: brightness(0.5) sepia(1) hue-rotate(-50deg) saturate(5);
            }

            .monster img {
                /* ä¿æŒåŸæœ¬çš„å¤§å°è¨­å®š */
                width: 200px;
                height: 200px;
                object-fit: contain;
                /* åŠ ä¸€é»æµ®å‹•å‹•ç•«è®“æ€ªç¸çœ‹èµ·ä¾†æ´»è‘— (é¸ç”¨) */
                animation: floatMonster 3s ease-in-out infinite; 
            }

            .monster-info {
                background: rgba(0, 0, 0, 0.7); /* æ·±è‰²åŠé€æ˜èƒŒæ™¯ */
                padding: 8px 16px;
                border-radius: 8px;
                border: 2px solid #ff4444; /* ç´…è‰²é‚Šæ¡†ä»£è¡¨æ•µäºº */
                text-align: center;
                box-shadow: 0 0 15px rgba(255, 68, 68, 0.4); /* ç´…è‰²ç™¼å…‰æ•ˆæœ */
            }

            .monster-name {
                color: #ffcccc; /* æ·ºç´…è‰²æ–‡å­— */
                font-size: 1rem;
                font-weight: bold;
                margin-bottom: 4px;
            }

            .monster-power {
                color: #ff4444; /* é®®ç´…è‰²æˆ°åŠ›æ•¸å€¼ */
                font-weight: bold;
                font-size: 1.1rem;
            }

            .player img {
                width: 140px;
                height: 140px;
                object-fit: contain;
            }

            /* å³ä¸Šè§’é¸å–®å®¹å™¨ */
            .container {
                position: fixed;
                top: 10px;
                right: 10px;
                display: flex;
                flex-direction: column;
                gap: 10px;
                align-items: center;
            }

            .menu-item {
                display: flex;
                flex-direction: column;
                align-items: center;
                background: rgba(12, 12, 40, 0.86);
                border-radius: 14px;
                padding: 6px 6px 8px;
                border: 1px solid rgba(255, 255, 255, 0.14);
                box-shadow: 0 0 12px rgba(0, 0, 0, 0.5);
            }

            .img {
                width: 60px;
                height: 60px;
                object-fit: contain;
                margin-bottom: 4px;
            }

            .button {
                border: none;
                padding: 4px 10px;
                border-radius: 999px;
                cursor: pointer;
                font-size: 0.8rem;
                background: rgba(40, 40, 90, 0.9);
                color: #f5f5ff;
                letter-spacing: 0.1em;
            }

            .button:hover {
                background: rgba(80, 80, 150, 0.95);
            }

            /* å·¦ä¸Šè§’é‡‘å¹£é¡¯ç¤ºï¼ˆå¯èª¿ä½ç½®ï¼‰ */
            .coin-panel {
                position: fixed;
                left: 10px;
                top: 10px;
                padding: 6px 10px;
                border-radius: 999px;
                background: rgba(10, 10, 30, 0.8);
                border: 1px solid rgba(255, 255, 255, 0.12);
                font-size: 0.9rem;
                display: flex;
                align-items: center;
                gap: 6px;
            }

            /* å·¦ä¸‹è§’è²“å’ª + é¢æ¿ */
            .wrap {
                position: fixed;
                left: 10px;
                bottom: 10px;
                display: flex;
                align-items: center;
                gap: 10px;
                background: rgba(10, 10, 30, 0.8);
                border-radius: 0 12px 12px 0;
                padding: 8px 12px 8px 0;
                border: 1px solid rgba(255, 255, 255, 0.15);
            }

            #cat {
                width: 80px;
                height: 80px;
                object-fit: cover;
                border-radius: 999px;
                cursor: pointer;
                box-shadow: 0 0 18px rgba(0, 0, 0, 0.8);
            }

            #cat:hover {
                transform: translateY(-2px);
                box-shadow: 0 0 24px rgba(255, 255, 255, 0.25);
            }

            .panel {
                font-size: 0.85rem;
                color: #e0e1ff;
            }

            .panel div + div {
                margin-top: 4px;
            }

            /* +10 é£„å­—æ•ˆæœ */
            .coin-float {
                position: fixed;
                font-size: 0.9rem;
                font-weight: 700;
                color: #ffd84a;
                text-shadow: 0 0 12px rgba(255, 216, 74, 0.9);
                pointer-events: none;
                animation: floatUp 0.7s ease-out forwards;
            }

            @keyframes floatUp {
                0% {
                    opacity: 1;
                    transform: translateY(0);
                }
                100% {
                    opacity: 0;
                    transform: translateY(-30px);
                }
            }
            /* --- æ–°å¢ï¼šè§’è‰²å¡ç‰‡æ¨£å¼ (å¾ Inventory æ¬éä¾†çš„) --- */
            .char-card {
                width: 140px; /* é…åˆåŸæœ¬ä¸»è§’çš„å¤§å° */
                background: rgba(20, 20, 45, 0.9);
                border: 2px solid #4a4a70;
                border-radius: 12px;
                overflow: hidden;
                display: flex;
                flex-direction: column;
                box-shadow: 0 4px 15px rgba(0,0,0,0.5);
            }

            .card-img {
                width: 100%;
                aspect-ratio: 1/1;
                object-fit: cover;
                background: rgba(0,0,0,0.2);
                border-bottom: 1px solid rgba(255,255,255,0.1);
            }

            .card-info {
                padding: 6px; /* ç¨å¾®ç¸®å°ä¸€é» padding ä»¥é©æ‡‰ä¸»ç•«é¢ */
                text-align: center;
            }

            .card-name {
                font-size: 0.9rem;
                font-weight: bold;
                margin-bottom: 4px;
                color: #fff;
                white-space: nowrap; /* é¿å…åå­—æ›è¡Œ */
                overflow: hidden;
                text-overflow: ellipsis;
            }

            .card-power {
                font-size: 0.8rem;
                color: #00e676;
            }

            /* index.html çš„ style å…§ */

            .battle-btn {
                margin-top: 20px; /* èˆ‡ä¸Šæ–¹ä¸»è§’ä¿æŒè·é›¢ */
                padding: 12px 30px;
                font-size: 1.2rem;
                font-weight: bold;
                color: #fff;
                background: linear-gradient(135deg, #ff416c, #ff4b2b); /* ç†±è¡€çš„æ¼¸å±¤ç´… */
                border: 2px solid #ffcccc;
                border-radius: 50px; /* åœ“è§’ */
                cursor: pointer;
                box-shadow: 0 0 15px rgba(255, 75, 43, 0.6); /* ç™¼å…‰æ•ˆæœ */
                transition: transform 0.1s, box-shadow 0.1s;
                text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
            }

            .battle-btn:hover {
                transform: scale(1.05); /* æ»‘é¼ ç§»ä¸Šå»æ”¾å¤§ */
                box-shadow: 0 0 25px rgba(255, 75, 43, 0.9);
            }

            .battle-btn:active {
                transform: scale(0.95); /* æŒ‰ä¸‹å»ç¸®å° */
            }

            .convert-btn {
                margin-top: 6px; /* èˆ‡ä¸Šæ–¹æ–‡å­—ä¿æŒè·é›¢ */
                padding: 4px 8px;
                font-size: 0.8rem;
                border: 1px solid #ffd700;
                background: rgba(255, 215, 0, 0.1);
                color: #ffd700;
                border-radius: 4px;
                cursor: pointer;
                transition: 0.2s;
                width: 100%; /* å¡«æ»¿é¢æ¿å¯¬åº¦ */
            }

            .convert-btn:hover {
                background: rgba(255, 215, 0, 0.3);
                transform: translateY(-1px);
            }

            .convert-btn:active {
                transform: translateY(1px);
            }
        </style>
    </head>
    <body>
        <!-- é‡‘å¹£é¡¯ç¤º -->
        <div class="coin-panel">
            <span>ğŸ’° é‡‘å¹£ï¼š<span id="coins">0</span></span>
            <span style="margin-left: 10px;">ğŸ’ å¯¶çŸ³ï¼š<span id="gems">0</span></span>
        </div>

        <!-- ä¸­å¤®æ€ªç¸ + ä¸»è§’ -->
        <div class="battle">
            <div class="monster">
                <img src="monster.png" alt="æ€ªç‰©">
                
                <div class="monster-info">
                    <div class="monster-name">æ·±æ·µå·¨é¾</div>
                    <div class="monster-power">
                        æˆ°åŠ›: <span id="monsterPower">???</span>
                    </div>
                </div>
            </div>
            
            <div class="player">
                </div>

            <button id="startBattleBtn" class="battle-btn">é–‹å§‹æˆ°é¬¥</button>
        </div>

        <!-- å³ä¸Šè§’é¸å–® -->
        <div class="container">
            <div class="menu-item">
                <img class="img" src="./character.png" alt="å¤–è§€">
                
                <button class="button" onclick="window.location.href='./inventory.html'">è§’è‰²</button>
            </div>
            
            <div class="menu-item">
                <img class="img" src="./gacha.png" alt="æŠ½å¡">
                <button class="button" type="button" onclick="window.location.href='./gacha.html'">æŠ½å¡</button>
            </div>

            <div class="menu-item">
                <img class="img" src="./settings.png" alt="è¨­å®š">
                <button class="button" type="button" onclick="window.location.href='./settings.html'">è¨­å®š</button>
            </div>
        </div>

        <!-- å·¦ä¸‹è§’è²“å’ª + é»æ“Šè³‡è¨Š -->
        <div class="wrap">
            <img id="cat" src="./Popcat_default.png" alt="cat">
            
            <div class="panel">
                <div>é»æ“Šæ¬¡æ•¸ï¼š<span id="clickCount">0</span></div>
                <div>é‡‘å¹£ï¼š<span id="coinsPanel">0</span></div>
                <div style="font-size:0.8rem;color:#bfc1ff;">é»è²“ï¼šå–µä¸€è² +10 é‡‘å¹£</div>
                
                <button id="convertBtn" class="convert-btn" title="200 é‡‘å¹£æ› 10 å¯¶çŸ³">
                    ğŸ”„ æ›å¯¶çŸ³ (200é‡‘)
                </button>
            </div>
        </div>

        <!-- è²“å«è²éŸ³æ•ˆ -->
        <audio id="meow" src="meow.mp3" preload="auto"></audio>

        <script>
            // --- æ–°å¢ï¼šè®€å–å‡ºæˆ°è§’è‰² ---
            window.addEventListener('DOMContentLoaded', () => {
                const playerContainer = document.querySelector('.player');
                
                // 1. å¾ LocalStorage è®€å–è³‡æ–™
                const savedData = localStorage.getItem('selectedHero');

                // 2. å¦‚æœæœ‰è³‡æ–™ï¼Œå°±å–ä»£åŸæœ¬çš„åœ–ç‰‡
                if (savedData) {
                    const char = JSON.parse(savedData);

                    // æ›¿æ› HTML çµæ§‹ï¼Œä½¿ç”¨è·Ÿè§’è‰²åº«ä¸€æ¨£çš„å¡ç‰‡æ¨£å¼
                    playerContainer.innerHTML = `
                        <div class="char-card">
                            <img src="${char.img}" alt="${char.name}" class="card-img">
                            <div class="card-info">
                                <div class="card-name">${char.name}</div>
                                <div class="card-power">âš”ï¸ ${char.combatPower}</div>
                            </div>
                        </div>
                    `;
                }
            });

            const img = document.getElementById("cat");
            const audio = document.getElementById("meow");
            const clickCountEl = document.getElementById("clickCount");
            const coinsPanelEl = document.getElementById("coinsPanel");
            const coinsTopEl = document.getElementById("coins");
            const gemsTopEl = document.getElementById("gems"); // æ–°å¢ï¼šå–å¾—å¯¶çŸ³å…ƒç´ 

            const img1 = "./Popcat_default.png";
            const img2 = "./popcat_open.png";
            let toggled = false;

            let clicks = 0; // é»æ“Šæ¬¡æ•¸é€šå¸¸ä¸ç”¨å­˜ï¼Œæˆ–æ‚¨ä¹Ÿå¯ä»¥å­˜
            let coins = localStorage.getItem('player_coins') ? parseInt(localStorage.getItem('player_coins')) : 0;
            let gems = localStorage.getItem('player_gems') ? parseInt(localStorage.getItem('player_gems')) : 500; // é è¨­çµ¦ 500 å¯¶çŸ³è®“æ‚¨æŠ½

            coinsTopEl.textContent = coins;
            coinsPanelEl.textContent = coins;
            if(gemsTopEl) gemsTopEl.textContent = gems;

            img.onclick = (event) => 
            {
                // è²“å«èˆ‡æ›åœ–
                audio.currentTime = 0;
                audio.play();
                toggled = !toggled;
                img.src = toggled ? img2 : img1;

                // è¨˜éŒ„æ•¸æ“š
                clicks += 1;
                coins += 10; // é»ä¸€æ¬¡è³º 10 é‡‘å¹£

                // --- ä¿®æ”¹ 2: æ¯æ¬¡é»æ“Šéƒ½å­˜å…¥ LocalStorage ---
                localStorage.setItem('player_coins', coins);

                // æ›´æ–°é¡¯ç¤º
                clickCountEl.textContent = clicks;
                coinsPanelEl.textContent = coins;
                coinsTopEl.textContent = coins;

                // é£„å­—ç‰¹æ•ˆ
                createCoinFloat(event.clientX, event.clientY);
            };

            function createCoinFloat(clientX, clientY) {
                const floatEl = document.createElement("div");
                floatEl.className = "coin-float";
                floatEl.textContent = "+10";

                floatEl.style.left = clientX + "px";
                floatEl.style.top = clientY + "px";

                document.body.appendChild(floatEl);

                setTimeout(() => {
                    floatEl.remove();
                }, 700);
            }

            /* index.html çš„ script å…§ */

            // --- è¼”åŠ©å‡½å¼ï¼šç”¢ç”Ÿéš¨æ©Ÿæ•´æ•¸ ---
            function getRandomInt(min, max) {
                return Math.floor(Math.random() * (max - min + 1)) + min;
            }

            // ç•¶é é¢è¼‰å…¥å®Œæˆæ™‚åŸ·è¡Œ
            window.addEventListener('DOMContentLoaded', () => {
                
                // 1. è¨­å®šæ€ªç¸çš„æˆ°åŠ›ç¯„åœ (ä¾‹å¦‚ 8000 ~ 20000ï¼Œæ¯”ä¸»è§’ç¨å¾®å¼·ä¸€é»)
                const monsterMin = 8000;
                const monsterMax = 20000;
                const monsterPower = getRandomInt(monsterMin, monsterMax);

                // 2. æ›´æ–°ç•«é¢é¡¯ç¤º
                const monsterPowerEl = document.getElementById('monsterPower');
                if (monsterPowerEl) {
                    monsterPowerEl.innerText = monsterPower;
                }

                // ... (åŸæœ¬è¼‰å…¥ä¸»è§’çš„ç¨‹å¼ç¢¼ä¿æŒåœ¨ä¸‹é¢) ...
                const playerContainer = document.querySelector('.player');
                const savedData = localStorage.getItem('selectedHero');
                // ...
            });

            /* index.html çš„ script å…§ */

            // å–å¾—æŒ‰éˆ•å…ƒç´ 
            const battleBtn = document.getElementById('startBattleBtn');

            /* index.html çš„ script å…§ï¼Œæ›¿æ›æ‰åŸæœ¬çš„ battleBtn é»æ“Šäº‹ä»¶ */

            battleBtn.addEventListener('click', () => {
                // --- 1. å‰ç½®æª¢æŸ¥èˆ‡æ•¸å€¼å–å¾— (é€™éƒ¨åˆ†è·ŸåŸæœ¬ä¸€æ¨£) ---
                const savedData = localStorage.getItem('selectedHero');
                if (!savedData) {
                    alert("âš ï¸ æ‚¨é‚„æ²’æœ‰é¸æ“‡å‡ºæˆ°è§’è‰²ï¼\nè«‹å…ˆå»ã€Œè§’è‰²ã€é é¢é¸æ“‡ä¸€éš»è‹±é›„ã€‚");
                    return;
                }

                const monsterPowerEl = document.getElementById('monsterPower');
                const monsterValText = monsterPowerEl ? monsterPowerEl.innerText : "0";
                const monsterPower = monsterValText === "???" ? 0 : parseInt(monsterValText);

                const char = JSON.parse(savedData);
                const playerPower = char.combatPower;
                const playerName = char.name;

                // å–å¾—ä¸»è§’å’Œæ€ªç¸çš„å®¹å™¨å…ƒç´ 
                const playerContainer = document.querySelector('.player');
                const monsterContainer = document.querySelector('.monster');

                // --- 2. åŸ·è¡Œæˆ°é¬¥å‹•ç•« ---
                
                // æ­¥é©Ÿ A: æŠŠä¸»è§’è¨­å®šç‚ºã€Œæ”»æ“Šä¸­ã€ç‹€æ…‹ (CSS æœƒè‡ªå‹•åŸ·è¡Œå¾€ä¸Šè¡çš„å‹•ç•«)
                playerContainer.classList.add('attacking');

                // æ­¥é©Ÿ B: è¨­å®šä¸€å€‹è¨ˆæ™‚å™¨ï¼Œç­‰å¾…å‹•ç•«è¡åˆ°æ€ªç¸èº«ä¸Š (è¨­å®šç‚º 300msï¼Œé…åˆ CSS çš„ 0.3s)
                setTimeout(() => {
        
        // 1. æ’åˆ°äº†ï¼åŠ ä¸Š .hit è®“æ€ªç¸é–‹å§‹æ–æ™ƒ (å°æ‡‰æˆ‘å€‘å‰›æ”¹çš„ CSS)
        monsterContainer.classList.add('hit');

        // 2. é‡è¦ä¿®æ”¹ï¼šå†å¤šç­‰ 500ms (è®“æ–æ™ƒå‹•ç•«æ’­å®Œ)ï¼Œæ‰è·³å‡ºçµæœ
        setTimeout(() => {
            
            // åˆ¤æ–·å‹è² ä¸¦è·³å‡º Alert
            if (playerPower > monsterPower) {
                alert(`ğŸ‰ æˆ°é¬¥å‹åˆ©ï¼\n\n${playerName} ä»¥ ${playerPower} çš„æˆ°åŠ›æ“Šæ•—äº†æˆ°åŠ› ${monsterPower} çš„æ€ªç¸ï¼`);
            } else if (playerPower < monsterPower) {
                alert(`â˜ ï¸ æˆ°é¬¥å¤±æ•—...\n\næ€ªç¸çš„æˆ°åŠ›é«˜é” ${monsterPower}ï¼Œè€Œä½ åªæœ‰ ${playerPower}ã€‚`);
            } else {
                alert(`âš–ï¸ å¹³æ‰‹ï¼\né›™æ–¹æˆ°åŠ›éƒ½æ˜¯ ${playerPower}ï¼Œä¸åˆ†å‹è² ã€‚`);
            }

            // Alert é—œé–‰å¾Œï¼Œå¾©åŸæ‰€æœ‰ç‹€æ…‹
            playerContainer.classList.remove('attacking'); // ä¸»è§’æ­¸ä½
            monsterContainer.classList.remove('hit');      // æ€ªç¸åœæ­¢æ–æ™ƒ

            }, 500); // é€™è£¡çš„ 500ms å°æ‡‰ CSS å‹•ç•«çš„æ™‚é–“

        }, 300); // é€™è£¡çš„ 300ms å°æ‡‰ä¸»è§’è¡ä¸Šå»çš„æ™‚é–“
            });

            /* index.html çš„ script å…§ */

            // 1. å–å¾—å…Œæ›æŒ‰éˆ•å…ƒç´ 
            const convertBtn = document.getElementById('convertBtn');

            // 2. åŠ å…¥é»æ“Šç›£è½å™¨
            convertBtn.addEventListener('click', (e) => {
                // é˜²æ­¢é»æ“ŠæŒ‰éˆ•æ™‚è§¸ç™¼åˆ°è²“å’ªçš„é»æ“Šäº‹ä»¶ (å¦‚æœæŒ‰éˆ•åœ¨è²“å’ªåœ–ç‰‡ä¸Šçš„è©±éœ€è¦é€™è¡Œï¼Œé€™è£¡åˆ†é–‹å…¶å¯¦é‚„å¥½ï¼Œä½†åŠ äº†ä¿éšª)
                e.stopPropagation();

                // å®šç¾©åŒ¯ç‡
                const costGold = 200;
                const gainGems = 10;

                // æª¢æŸ¥é‡‘å¹£æ˜¯å¦è¶³å¤ 
                if (coins >= costGold) {
                    // åŸ·è¡Œäº¤æ˜“
                    coins -= costGold;
                    gems += gainGems;

                    // å„²å­˜æ–°çš„æ•¸å€¼
                    localStorage.setItem('player_coins', coins);
                    localStorage.setItem('player_gems', gems);

                    // æ›´æ–°ç•«é¢
                    coinsPanelEl.textContent = coins;
                    coinsTopEl.textContent = coins;
                    if(gemsTopEl) gemsTopEl.textContent = gems;

                    // è¦–è¦ºå›é¥‹ï¼šåœ¨æŒ‰éˆ•ä½ç½®é£„å‡º "+10 ğŸ’"
                    createGemFloat(e.clientX, e.clientY);

                } else {
                    // é‡‘å¹£ä¸è¶³
                    alert(`é‡‘å¹£ä¸è¶³ï¼\néœ€è¦ ${costGold} é‡‘å¹£æ‰èƒ½å…Œæ›ï¼Œä½ ç›®å‰åªæœ‰ ${coins}ã€‚`);
                }
            });

            // æ–°å¢ï¼šå¯¶çŸ³é£„å­—ç‰¹æ•ˆ (è¤‡è£½é‡‘å¹£çš„ç¨å¾®æ”¹ä¸€ä¸‹é¡è‰²)
            function createGemFloat(x, y) {
                const floatEl = document.createElement("div");
                floatEl.className = "coin-float"; // å…±ç”¨é‡‘å¹£çš„å‹•ç•« class
                floatEl.textContent = "+10 ğŸ’";
                floatEl.style.color = "#00e6ff";  // æ”¹æˆå¯¶çŸ³è—
                floatEl.style.textShadow = "0 0 12px rgba(0, 230, 255, 0.9)";
                
                // ç¨å¾®èª¿æ•´ä½ç½®ï¼Œä¸è¦æ“‹ä½æŒ‰éˆ•
                floatEl.style.left = x + "px";
                floatEl.style.top = (y - 30) + "px";

                document.body.appendChild(floatEl);

                setTimeout(() => {
                    floatEl.remove();
                }, 700);
            }
        </script>
    </body>
</html>
